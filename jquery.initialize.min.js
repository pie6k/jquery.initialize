(function($){"use strict";if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector}var MutationSelectorObserver=function(selector,callback,options){this.selector=selector.trim();this.callback=callback;this.options=options};var msobservers=[];msobservers.initialize=function(selector,callback,options){var seen=[];var callbackOnce=function(){if(seen.indexOf(this)==-1){seen.push(this);$(this).each(callback)}};$(options.target).find(selector).each(callbackOnce);var msobserver=new MutationSelectorObserver(selector,callbackOnce,options);this.push(msobserver);var observer=new MutationObserver(function(mutations){var matches=[];for(var m=0;m<mutations.length;m++){if(window.jQuery.fn.jquery>"3.7"){if(mutations[m].type=="attributes"){if($(mutations[m].target).is(msobserver.selector))matches.push($(mutations[m].target));matches.push($(mutations[m].target.parentElement).find(msobserver.selector))}if(mutations[m].type=="childList"){for(var n=0;n<mutations[m].addedNodes.length;n++){if(!(mutations[m].addedNodes[n]instanceof Element))continue;if($(mutations[m].addedNodes[n]).is(msobserver.selector))matches.push($(mutations[m].addedNodes[n]));matches.push($(mutations[m].addedNodes[n].parentElement).find(msobserver.selector))}}}else{if(mutations[m].type=="attributes"){if(mutations[m].target.matches(msobserver.selector))matches.push($(mutations[m].target));matches.push.apply(matches,$.map(mutations[m].target.parentElement.querySelectorAll(msobserver.selector),$))}if(mutations[m].type=="childList"){for(var n=0;n<mutations[m].addedNodes.length;n++){if(!(mutations[m].addedNodes[n]instanceof Element))continue;if(mutations[m].addedNodes[n].matches(msobserver.selector))matches.push($(mutations[m].addedNodes[n]));matches.push.apply(matches,$.map(mutations[m].addedNodes[n].parentElement.querySelectorAll(msobserver.selector),$))}}}}for(var i=0;i<matches.length;i++)matches[i].each(msobserver.callback)});var defaultObeserverOpts={childList:true,subtree:true,attributes:true};observer.observe(options.target,options.observer||defaultObeserverOpts);return observer};$.initialize=function(selector,callback,options){return msobservers.initialize(selector,callback,$.extend({},$.initialize.defaults,options))};$.initialize.defaults={target:document.documentElement,observer:null}})(jQuery);
